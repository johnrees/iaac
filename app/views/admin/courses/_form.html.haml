= simple_form_for [:admin,course] do |f|

  %fieldset
    %legend Course Details
    = f.input :published
    = f.input :parent_id, collection: Course.list_for_select
    = f.input :gradeable
    = f.input :name
    = f.input :description

  - unless @course.new_record? or @course.has_children?
    %fieldset
      %legend Students
      = f.select :student_ids, User.all.map{|s| [s, s.id] }, {selected: course.students.map(&:id) }, multiple: true, id: 'student-ids'

    %fieldset
      %legend Tutors
      = f.select :tutor_ids, User.all.map{|s| [s, s.id] }, {selected: course.tutors.map(&:id) }, multiple: true, id: 'tutor-ids'

  = f.submit class: 'button'
